getSpringsOnline <- function(username, password, sites = TRUE){
  
if(sites == FALSE){
  library(tidyverse)
  dir.create(file.path(getwd(), paste0("/data/all/ssi/")), showWarnings = FALSE)
  downloadPath <- file.path(getwd(), "/data/all/ssi/")# %>% stringr::str_replace_all("/", "\\\\\\\\")
  
  #full_data <- vector("list", length = length(park))
  
  #for(i in 1:length(park)){
    
    #Create the resting place for each park's Aquarius data:
    dir.create(file.path(getwd(), paste0("/data/all/ssi/")), showWarnings = FALSE)

    downloadPath <- file.path(getwd(), "/data/all/ssi/")# %>% stringr::str_replace_all("/", "\\\\\\\\")
    
    # make sure server downloads data into appropriate folder (i.e., our temporary folder)
    fprof <- RSelenium::makeFirefoxProfile(list(browser.download.dir = downloadPath,
                                                browser.download.folderList = 2L,
                                                browser.download.manager.showWhenStarting = FALSE,
                                                browser.helperApps.neverAsk.openFile = "text/csv",
                                                browser.helperApps.neverAsk.saveToDisk = "text/csv"))
    
    exCap <- list(firefox_profile = fprof$firefox_profile, 
                  # REMOVE  "Pop-up" CONSOLE:
                  "moz:firefoxOptions" = list(args = list('--headless')))
    
    # start up RSelenium session:
    rD <- RSelenium::rsDriver(browser = "firefox", port = sample.int(1000, 1), extraCapabilities = exCap)
    remDr <- rD$client

    # log in to Springs Online using username and password
    remDr$navigate('https://springsdata.org/profile/index.php?refurl=/index.php')
    Sys.sleep(3) # provide time for site navigation
    dropper <- remDr$findElement(using = 'xpath', value = '//*[@id="login"]')
    Sys.sleep(3) # provide time for navigation and selection
    dropper$sendKeysToElement(list("krw21719", key = "enter"))
    Sys.sleep(3)
    remDr$screenshot(display = TRUE)
    
    # go to site search
    remDr$navigate('https://springsdata.org/search/index.php')
    Sys.sleep(3)
    remDr$screenshot(display = TRUE)
    # select all sites in USA
    option <- remDr$findElement(using = 'xpath', '//*[@id="Country"]')
    Sys.sleep(2)
    option$clickElement()
    Sys.sleep(2)
    option <- remDr$findElement(using = 'xpath', "/html/body/div[1]/div[5]/form/div[7]/select/option[3]")
    Sys.sleep(2)
    option$clickElement()
    Sys.sleep(2)
    remDr$screenshot(display = TRUE)
    # click "search"
    search <- remDr$findElement(using = 'xpath', "/html/body/div[1]/div[5]/form/div[2]/div[1]/input")
    Sys.sleep(2)
    search$clickElement()
    Sys.sleep(5)
    Sys.sleep(5)
    Sys.sleep(5)
    Sys.sleep(5)
    
    #remDr$screenshot(display = TRUE)
  
    dropper <- remDr$findElement(using = 'xpath', value = '//*[@id="querydownloadselect"]')
    Sys.sleep(3) # provide time for navigation and selection
    dropper$clickElement()
    Sys.sleep(3) # provide  time for download to start
    dropper <- remDr$findElement(usin = 'xpath', value = "/html/body/div/div[4]/div[3]/div/div[4]/div[1]/div[1]/select/option[2]")
    Sys.sleep(2)
    dropper$clickElement()
    Sys.sleep(3) # provide  time for download to start
    dropper <- remDr$findElement(usin = 'xpath', value = "/html/body/div/div[4]/div[3]/div/div[4]/div[1]/div[2]/button")
    Sys.sleep(2)
    dropper$clickElement()
    Sys.sleep(15)
    
    # end the RSelenium server session
    remDr$close()
    rD[["server"]]$stop()
}
  
}